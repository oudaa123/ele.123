<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¬Ù…ÙŠØ¹ Ù…Ù†ØªØ¬Ø§Øª Ø¬Ù†Ø© - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø­Ø³Ù†Ø©</title>
    <style>
        :root {
            --primary-color: #8a2be2;
            --secondary-color: #ffd814;
            --accent-color: #ff4444;
            --text-color: #333;
            --light-bg: #f9f9f9;
            --card-bg: #fff;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: Tahoma, sans-serif;
            background: var(--light-bg);
            font-size: 14px;
            padding-bottom: 60px;
        }

        header {
            background: #131921;
            color: white;
            padding: 10px 5px;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header-buttons {
            margin-top: 8px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 5px;
        }

        .header-buttons button {
            background: var(--secondary-color);
            border: 1px solid #fcd200;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            font-size: 14px;
            white-space: nowrap;
            flex: 1;
            min-width: 0;
            max-width: 140px;
        }

        .header-buttons button:hover {
            background: #f7ca00;
        }

        #cart-count {
            background: red;
            color: #fff;
            font-size: 12px;
            font-weight: bold;
            padding: 2px 5px;
            border-radius: 50%;
            margin-right: 5px;
        }

        .search-container {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin: 10px 0;
            padding: 0 5px;
        }

        #searchBox {
            flex: 1;
            max-width: 300px;
            padding: 8px 12px;
            border: 1px solid #ccc;
            border-radius: 6px;
            font-size: 14px;
        }

        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª Ø§Ù„Ù…Ø«Ø¨Øª */
        .categories-container {
            position: sticky;
            top: 0;
            z-index: 999;
            background: white;
            border-bottom: 1px solid #ddd;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .categories-bar {
            display: flex;
            overflow-x: auto;
            padding: 12px 10px;
            scrollbar-width: none;
            -ms-overflow-style: none;
            gap: 8px;
            background: white;
        }

        .categories-bar::-webkit-scrollbar {
            display: none;
        }

        .category-btn {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            padding: 10px 18px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            font-size: 14px;
            white-space: nowrap;
            transition: all 0.3s ease;
            flex-shrink: 0;
            min-width: max-content;
        }

        .category-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        /* Ø´Ø¨ÙƒØ© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 15px;
            padding: 15px;
        }

        .product-item {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: all 0.3s ease;
        }

        .product-image-container {
            width: 100%;
            height: 150px;
            background: #f9f9f9;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            margin-bottom: 12px;
            overflow: hidden;
        }

        .product-image-container img {
            max-width: 90%;
            max-height: 90%;
            object-fit: contain;
        }

        .product-name {
            font-size: 14px;
            font-weight: bold;
            color: var(--text-color);
            margin-bottom: 8px;
            text-align: center;
            height: 40px;
            overflow: hidden;
        }

        .product-price {
            font-size: 16px;
            color: var(--primary-color);
            font-weight: bold;
            margin-bottom: 10px;
        }

        .product-controls {
            display: flex;
            flex-direction: column;
            gap: 8px;
            width: 100%;
        }

        .quantity-input {
            width: 60px;
            margin: 0 auto;
            padding: 6px;
            border: 1px solid #ccc;
            border-radius: 6px;
            text-align: center;
        }

        .add-to-cart-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
        }

        /* Ù…ÙˆØ¯Ø§Ù„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© */
        #totalModal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            z-index: 1002;
            overflow-y: auto;
            padding: 15px;
        }

        .modal-content {
            background: #fff;
            margin: 20px auto;
            padding: 20px;
            border-radius: 10px;
            max-width: 95%;
            width: 500px;
            position: relative;
        }

        .modal-content.compact {
            width: 400px;
            padding: 15px;
        }

        .toggle-invoice-size {
            position: absolute;
            top: 10px;
            right: 50px;
            background: #8a2be2;
            color: white;
            border: none;
            border-radius: 4px;
            width: 30px;
            height: 30px;
            cursor: pointer;
        }

        .modal-close {
            position: absolute;
            top: 10px;
            left: 10px;
            background: #ff4444;
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
        }

        .invoice-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .invoice-table th, .invoice-table td {
            padding: 10px;
            text-align: center;
            border-bottom: 1px solid #ddd;
        }

        .invoice-table th {
            background: var(--primary-color);
            color: white;
        }

        /* Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ø¯ÙŠØ« */
        .auto-update-indicator {
            position: fixed;
            top: 10px;
            right: 10px;
            background: #25d366;
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            z-index: 1005;
            display: none;
        }

        /* Ø¥Ø´Ø¹Ø§Ø± */
        #toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            left: 20px;
            background: #25d366;
            color: #fff;
            padding: 10px 15px;
            border-radius: 10px;
            text-align: center;
            display: none;
            z-index: 1003;
        }

        /* Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø£Ø³Ø¹Ø§Ø± */
        .hide-price .product-price,
        .hide-price .quantity-input,
        .hide-price .add-to-cart-btn {
            display: none;
        }

        #showPricesBar {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--primary-color);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            cursor: pointer;
            z-index: 999;
        }
    </style>
</head>
<body class="hide-price">

<div id="showPricesBar" onclick="showPasswordModal()">
    ğŸ‘ï¸ Ø§Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø³Ø¹Ø§Ø±
</div>

<header>
    ğŸ“¦ELEC.123.ØªØ§Ø¬ ÙˆØ¬Ù…ÙŠØ¹ Ù…Ù†ØªØ¬Ø§Øª Ø¬Ù†Ø©
    <div class="header-buttons">
        <button id="cartBtn">ğŸ›’ Ø§Ù„Ø³Ù„Ø© <span id="cart-count">0</span></button>
        <button id="totalBtn">ğŸ’° Ø§Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙØ§ØªÙˆØ±Ø©</button>
        <button onclick="window.location.href='index.html'">ğŸ”™ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
        <button id="clearCartBtn" onclick="clearCart()">ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„Ø³Ù„Ø©</button>
    </div>

    <div class="search-container">
        <input type="text" id="searchBox" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬...">
    </div>
</header>

<!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª Ø§Ù„Ù…Ø«Ø¨Øª -->
<div class="categories-container">
    <div class="categories-bar" id="categoriesBar">
        <button class="category-btn active" data-category="all">Ø§Ù„ÙƒÙ„</button>
        <button class="category-btn" data-category="ØµØ¨">Ø§Ù„ØµØ¨Ø§Øª</button>
        <button class="category-btn" data-category="ÙƒØ§Ø¨Ù„">Ø§Ù„ÙƒØ§Ø¨Ù„Ø§Øª</button>
        <button class="category-btn" data-category="Ø´Ø§Ø­Ù†">Ø§Ù„Ø´ÙˆØ§Ø­Ù†</button>
        <button class="category-btn" data-category="Ø¬Ø±Ø§Ø¨">Ø§Ù„Ø¬Ø±Ø§Ø¨Ø§Øª</button>
        <button class="category-btn" data-category="Ø³Ù…Ø§Ø¹Ø©">Ø§Ù„Ø³Ù…Ø§Ø¹Ø§Øª</button>
    </div>
</div>

<!-- Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ø¯ÙŠØ« -->
<div id="autoUpdateIndicator" class="auto-update-indicator">ğŸ”„ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ«</div>

<!-- Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª -->
<div id="products-container" class="products-grid">
    <div class="products-loading">
        Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª...
    </div>
</div>

<!-- Ù…ÙˆØ¯Ø§Ù„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© -->
<div id="totalModal">
    <div class="modal-content" id="invoiceModalContent">
        <button class="modal-close" onclick="closeTotalModal()">Ã—</button>
        <button class="toggle-invoice-size" id="toggleInvoiceSize" onclick="toggleInvoiceSize()">âˆ’</button>
        
        <div class="invoice-header">
            <h2>ÙØ§ØªÙˆØ±Ø© Ø§Ù„Ø·Ù„Ø¨</h2>
            <div id="invoiceDate"></div>
        </div>
        
        <table class="invoice-table">
            <thead>
                <tr>
                    <th>Ø§Ù„Ù…Ù†ØªØ¬</th>
                    <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
                    <th>Ø§Ù„Ø³Ø¹Ø±</th>
                    <th>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</th>
                </tr>
            </thead>
            <tbody id="cartList">
            </tbody>
        </table>
        
        <div class="invoice-total">
            <strong>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: <span id="finalTotal">0.00</span> Ø¬Ù†ÙŠÙ‡</strong>
        </div>
        
        <div class="modal-buttons">
            <button onclick="sendInvoice()">ğŸ“¤ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</button>
            <button onclick="closeTotalModal()">Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
    </div>
</div>

<!-- Ø¥Ø´Ø¹Ø§Ø± -->
<div id="toast"></div>

<!-- Ù…ÙˆØ¯Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± -->
<div id="passwordModal">
    <div class="password-content">
        <h3>Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±</h3>
        <input type="password" id="passwordInput" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±">
        <div class="password-buttons">
            <button onclick="checkPassword()">ØªØ£ÙƒÙŠØ¯</button>
            <button onclick="closePasswordModal()">Ø¥Ù„ØºØ§Ø¡</button>
        </div>
    </div>
</div>

<script>
// Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
let productsData = [];
let cart = [];
let pricesVisible = false;
let autoUpdateInterval;
let isInvoiceCompact = false;

const PASSWORD = "2525";

// Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©
const SAMPLE_PRODUCTS = [
    { name: "Ø´Ø§Ø­Ù† Ø³Ø§Ù…Ø³ÙˆÙ†Ø¬ Ø§ØµÙ„ÙŠ", price: "120", category: "Ø´Ø§Ø­Ù†" },
    { name: "ÙƒØ§Ø¨Ù„ Ø´Ø­Ù† Ù†ÙˆØ¹ C", price: "80", category: "ÙƒØ§Ø¨Ù„" },
    { name: "Ø¬Ø±Ø§Ø¨ Ø§ÙŠÙÙˆÙ† 14", price: "150", category: "Ø¬Ø±Ø§Ø¨" },
    { name: "Ø³Ù…Ø§Ø¹Ø§Øª Ø§ÙŠØ±Ø¨ÙˆØ¯Ø²", price: "300", category: "Ø³Ù…Ø§Ø¹Ø©" },
    { name: "Ø´Ø§Ø­Ù† Ù…ØªÙ†Ù‚Ù„ 10000", price: "400", category: "Ø´Ø§Ø­Ù†" },
    { name: "Ø²Ø¬Ø§Ø¬ Ø­Ù…Ø§ÙŠØ© Ø´Ø§Ø´Ø©", price: "50", category: "Ø§Ø®Ø±Ù‰" }
];

// ========== Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ==========

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
async function fetchProducts() {
    try {
        // Ù…Ø­Ø§ÙƒØ§Ø© Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† API
        await new Promise(resolve => setTimeout(resolve, 1000));
        
        // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©
        productsData = SAMPLE_PRODUCTS;
        renderProducts(productsData, document.getElementById("products-container"));
        
    } catch (error) {
        console.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:", error);
        // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ© ÙƒØ¨Ø¯ÙŠÙ„
        productsData = SAMPLE_PRODUCTS;
        renderProducts(productsData, document.getElementById("products-container"));
    }
}

// Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
function renderProducts(data, container) {
    let html = "";
    
    data.forEach((item, index) => {
        html += `
            <div class="product-item">
                <div class="product-image-container">
                    <div class="image-placeholder">ğŸ–¼ï¸ ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬</div>
                </div>
                <div class="product-info">
                    <div class="product-name">${item.name}</div>
                    <div class="product-price">${item.price} Ø¬Ù†ÙŠÙ‡</div>
                    <div class="product-controls">
                        <input type="number" class="quantity-input" min="1" value="1" data-index="${index}">
                        <button class="add-to-cart-btn" onclick="addToCart(${index})">Ø£Ø¶Ù Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©</button>
                    </div>
                </div>
            </div>
        `;
    });
    
    container.innerHTML = html;
    togglePricesVisibility();
}

// Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©
function addToCart(index) {
    if (!pricesVisible) {
        showPasswordModal();
        showToast('ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ø£ÙˆÙ„Ø§Ù‹');
        return;
    }
    
    const input = document.querySelector(`input[data-index="${index}"]`);
    const quantity = parseInt(input.value) || 1;
    
    cart[index] = (cart[index] || 0) + quantity;
    updateCartCount();
    showToast('ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©');
}

// ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø³Ù„Ø©
function updateCartCount() {
    const count = Object.values(cart).reduce((sum, qty) => sum + qty, 0);
    document.getElementById("cart-count").textContent = count;
    document.getElementById("cart-count").style.display = count > 0 ? "inline" : "none";
}

// Ø¹Ø±Ø¶ Ø§Ù„ÙØ§ØªÙˆØ±Ø©
function showTotal() {
    if (!pricesVisible) {
        showPasswordModal();
        return;
    }
    
    const cartList = document.getElementById("cartList");
    cartList.innerHTML = "";
    
    let total = 0;
    
    cart.forEach((qty, idx) => {
        if (qty > 0 && productsData[idx]) {
            const price = parseFloat(productsData[idx].price) || 0;
            const lineTotal = qty * price;
            total += lineTotal;
            
            const row = document.createElement("tr");
            row.innerHTML = `
                <td>${productsData[idx].name}</td>
                <td>${qty}</td>
                <td>${price} Ø¬Ù†ÙŠÙ‡</td>
                <td>${lineTotal} Ø¬Ù†ÙŠÙ‡</td>
            `;
            cartList.appendChild(row);
        }
    });
    
    document.getElementById("finalTotal").textContent = total.toFixed(2);
    document.getElementById("invoiceDate").textContent = new Date().toLocaleString('ar-EG');
    document.getElementById("totalModal").style.display = "block";
}

// Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙØ§ØªÙˆØ±Ø©
function sendInvoice() {
    let message = "ğŸ“‹ ÙØ§ØªÙˆØ±Ø© Ø·Ù„Ø¨:\n\n";
    
    cart.forEach((qty, idx) => {
        if (qty > 0 && productsData[idx]) {
            const price = parseFloat(productsData[idx].price) || 0;
            message += `${productsData[idx].name} - ${qty} Ã— ${price} Ø¬Ù†ÙŠÙ‡\n`;
        }
    });
    
    message += `\nØ§Ù„Ù…Ø¬Ù…ÙˆØ¹: ${document.getElementById("finalTotal").textContent} Ø¬Ù†ÙŠÙ‡`;
    
    const phone = "201022495795";
    const url = `https://wa.me/${phone}?text=${encodeURIComponent(message)}`;
    window.open(url, '_blank');
}

// Ù…Ø³Ø­ Ø§Ù„Ø³Ù„Ø©
function clearCart() {
    if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ù…Ø³Ø­ Ø§Ù„Ø³Ù„Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ØŸ')) {
        cart = [];
        updateCartCount();
        showToast('ØªÙ… Ù…Ø³Ø­ Ø§Ù„Ø³Ù„Ø©');
    }
}

// ========== Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ==========

// ØªØ«Ø¨ÙŠØª Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
function handleCategoriesSticky() {
    const categoriesContainer = document.querySelector('.categories-container');
    
    window.addEventListener('scroll', function() {
        if (window.scrollY > 100) {
            categoriesContainer.style.top = '0';
        } else {
            categoriesContainer.style.top = '';
        }
    });
}

// ØªØ¨Ø¯ÙŠÙ„ Ø­Ø¬Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©
function toggleInvoiceSize() {
    const modalContent = document.getElementById('invoiceModalContent');
    const toggleButton = document.getElementById('toggleInvoiceSize');
    
    isInvoiceCompact = !isInvoiceCompact;
    
    if (isInvoiceCompact) {
        modalContent.classList.add('compact');
        toggleButton.textContent = '+';
    } else {
        modalContent.classList.remove('compact');
        toggleButton.textContent = 'âˆ’';
    }
}

// Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
function initializeAutoUpdate() {
    autoUpdateInterval = setInterval(() => {
        showAutoUpdateIndicator();
        fetchProducts();
    }, 30000); // 30 Ø«Ø§Ù†ÙŠØ©
}

function showAutoUpdateIndicator() {
    const indicator = document.getElementById('autoUpdateIndicator');
    indicator.style.display = 'block';
    setTimeout(() => indicator.style.display = 'none', 3000);
}

// ========== Ø¥Ø¯Ø§Ø±Ø© ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± ==========

function togglePricesVisibility() {
    if (pricesVisible) {
        document.body.classList.remove('hide-price');
        document.getElementById('showPricesBar').style.display = 'none';
    } else {
        document.body.classList.add('hide-price');
        document.getElementById('showPricesBar').style.display = 'block';
    }
}

function showPasswordModal() {
    document.getElementById('passwordModal').style.display = 'block';
    document.getElementById('passwordInput').focus();
}

function closePasswordModal() {
    document.getElementById('passwordModal').style.display = 'none';
    document.getElementById('passwordInput').value = '';
}

function checkPassword() {
    const input = document.getElementById('passwordInput').value;
    if (input === PASSWORD) {
        pricesVisible = true;
        togglePricesVisibility();
        closePasswordModal();
        showToast('ØªÙ… Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ø¨Ù†Ø¬Ø§Ø­');
    } else {
        showToast('ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ø®Ø§Ø·Ø¦Ø©');
        document.getElementById('passwordInput').value = '';
    }
}

// ========== Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø© ==========

function showToast(msg) {
    const toast = document.getElementById("toast");
    toast.textContent = msg;
    toast.style.display = "block";
    setTimeout(() => toast.style.display = "none", 2000);
}

function closeTotalModal() {
    document.getElementById("totalModal").style.display = 'none';
}

// ========== ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø© ==========

document.addEventListener('DOMContentLoaded', function() {
    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
    fetchProducts();
    
    // Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
    initializeAutoUpdate();
    
    // ØªÙØ¹ÙŠÙ„ ØªØ«Ø¨ÙŠØª Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
    handleCategoriesSticky();
    
    // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
    document.getElementById("cartBtn").onclick = showTotal;
    document.getElementById("totalBtn").onclick = showTotal;
    
    document.getElementById('passwordInput').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            checkPassword();
        }
    });
    
    // Ø§Ù„Ø¨Ø­Ø«
    document.getElementById("searchBox").addEventListener("input", function(e) {
        const keyword = e.target.value.toLowerCase();
        const filtered = productsData.filter(p => 
            p.name.toLowerCase().includes(keyword)
        );
        renderProducts(filtered, document.getElementById("products-container"));
    });
    
    // Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª
    document.querySelectorAll('.category-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            
            const category = this.getAttribute('data-category');
            let filtered = productsData;
            
            if (category !== 'all') {
                filtered = productsData.filter(p => p.category === category);
            }
            
            renderProducts(filtered, document.getElementById("products-container"));
        });
    });
});
</script>
</body>
</html>
