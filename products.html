<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø¬Ù…ÙŠØ¹ Ù…Ù†ØªØ¬Ø§Øª Ø¬Ù†Ø©</title>
<style>
/* CSS Ø§Ù„Ø­Ø§Ù„ÙŠ ÙŠØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡Ùˆ Ù…Ø¹ Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ§Ù„ÙŠ */

/* ØªØ­Ø³ÙŠÙ† Ø´Ø¹Ø§Ø± "Ø¬Ø¯ÙŠØ¯" */
.new-product-badge {
  position: absolute;
  top: 5px;
  left: 5px;
  background: linear-gradient(135deg, #ff4444, #cc0000);
  color: white;
  padding: 4px 8px;
  border-radius: 15px;
  font-size: 11px;
  font-weight: bold;
  z-index: 1;
  box-shadow: 0 2px 5px rgba(0,0,0,0.3);
  animation: pulse-badge 2s infinite;
  display: flex;
  align-items: center;
  gap: 3px;
}

@keyframes pulse-badge {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}

/* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© */
.product.new-product {
  border: 2px solid #ff4444;
  box-shadow: 0 4px 12px rgba(255, 68, 68, 0.2);
}

.product.new-product:hover {
  box-shadow: 0 6px 15px rgba(255, 68, 68, 0.3);
  transform: translateY(-3px);
}

/* Ø¨Ø§Ù‚ÙŠ CSS ÙŠØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡Ùˆ */
:root {
  --primary-color: #8a2be2;
  --secondary-color: #ffd814;
  --accent-color: #ff4444;
  --text-color: #333;
  --light-bg: #f9f9f9;
  --card-bg: #fff;
}

body { 
  font-family: Tahoma, sans-serif; 
  margin: 0; 
  background: var(--light-bg);
  font-size: 14px;
  padding-bottom: 60px;
}

/* ... Ø¨Ø§Ù‚ÙŠ CSS Ø§Ù„Ø­Ø§Ù„ÙŠ ... */
</style>
</head>
<body class="hide-price">

<!-- Ø¨Ø§Ù‚ÙŠ HTML ÙŠØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡Ùˆ -->

<script>
// Ø¯Ø§Ù„Ø© renderProducts Ø§Ù„Ù…Ø¹Ø¯Ù„Ø©
function renderProducts(data, containerElement){
  let html = "";
  
  if (data.length === 0) {
    html = `<div style="text-align: center; padding: 20px; color: #666;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª Ù„Ø¹Ø±Ø¶Ù‡Ø§</div>`;
  } else {
    data.forEach((item, index) => {
      const formattedPrice = formatPrice(item.price);
      
      // Ø§Ù„ÙƒØ´Ù Ø¹Ù† Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ ÙˆØ¬ÙˆØ¯ ".." ÙÙŠ Ø§Ù„Ø§Ø³Ù…
      const isNewProduct = item.name && item.name.includes("..");
      
      // Ø¥Ø²Ø§Ù„Ø© ".." Ù…Ù† Ø§Ù„Ø§Ø³Ù… Ù„Ù„Ø¹Ø±Ø¶
      const displayName = item.name ? item.name.replace(/\.\./g, "") : item.name;
      
      html += `<div class="product ${isNewProduct ? 'new-product' : ''}">
                  ${isNewProduct ? '<span class="new-product-badge">ğŸ†• Ø¬Ø¯ÙŠØ¯</span>' : ''}
                  <img src="${item.image || 'https://via.placeholder.com/150'}" 
                       onerror="handleImageError(this)" 
                       alt="${displayName}" 
                       loading="lazy"
                       onload="this.style.display='block'; const placeholder=this.parentNode.querySelector('.image-placeholder'); if(placeholder) placeholder.remove();">
                  <div class="product-info">
                    <div class="name">${displayName}</div>
                    <div class="price">${formattedPrice} Ø¬Ù†ÙŠÙ‡</div>
                    <input type="number" min="1" value="${cart[index] || 1}" data-index="${index}">
                    <button onclick="addToCart(${index})">Ø£Ø¶Ù Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©</button>
                  </div>
               </div>`;
    });
  }
  
  containerElement.innerHTML = html;
  
  // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„ÙƒÙ…ÙŠØ©
  containerElement.querySelectorAll('input[type="number"]').forEach(input => {
    input.addEventListener('change', function() {
      const index = parseInt(this.getAttribute('data-index'));
      const value = parseInt(this.value);
      updateQty(index, value);
    });
  });
  
  togglePricesVisibility();
}

// Ø¨Ø§Ù‚ÙŠ JavaScript ÙŠØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡Ùˆ
</script>
</body>
</html>
