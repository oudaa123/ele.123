<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø£ØµÙ„ÙŠØ§Øª - Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</title>
<style>
body { font-family: Tahoma, sans-serif; text-align:center; padding:10px; margin:0; background:#f9f9f9; }
.logo { background:#25d366; color:white; font-size:20px; font-weight:bold; padding:15px; border-radius:10px; margin-bottom:15px; display:inline-block; }
h1 { font-size:22px; margin-bottom:15px; }

#products-container { display:flex; flex-wrap:wrap; justify-content:center; gap:10px; }

.product { border:1px solid #ccc; border-radius:10px; padding:10px; text-align:center; width:45%; max-width:180px; background:#fff; box-shadow:0 2px 5px rgba(0,0,0,0.1); transition:0.3s; }
.product:hover { box-shadow:0 4px 12px rgba(0,0,0,0.2); }
.product img { width:100%; height:150px; object-fit:cover; border-radius:5px; }
.name { font-size:16px; margin:5px 0; color:#333; }
.price { font-weight:bold; margin-bottom:5px; }
.product input { width:50px; margin:5px 0; border-radius:5px; border:1px solid #ccc; text-align:center; }
.product button { padding:5px 10px; border:none; border-radius:5px; background:#8a2be2; color:#fff; cursor:pointer; font-weight:bold; transition:0.3s; }
.product button:hover { background:#6a1fbf; transform:scale(1.05); }

/* Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¯Ø¹Ù… ÙˆØ§Ù„Ø³Ù„Ø© */
.support-btn, .total-btn, .cart-btn {
    position: fixed; padding:15px 20px; border-radius:50px; color: #fff; font-weight:bold; cursor: pointer;
    box-shadow:0 2px 5px rgba(0,0,0,0.3); transition:0.3s; z-index:1001;
}
.support-btn { top:10px; left:10px; background:#ff5722; }
.support-btn:hover { background:#e64a19; transform:scale(1.1); }
.total-btn { bottom:20px; right:20px; background:#00bfff; font-size:18px; padding:20px 25px; }
.total-btn:hover { background:#009acd; transform:scale(1.05); }
.cart-btn { bottom:100px; right:20px; background:#8a2be2; font-size:16px; padding:15px 20px; }
.cart-btn:hover { background:#6a1fbf; transform:scale(1.05); }

/* Ù†Ø§ÙØ°Ø© Ø§Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙØ§ØªÙˆØ±Ø© */
#totalModal { display:none; position:fixed; top:50%; left:50%; transform:translate(-50%,-50%);
    background:#fff; padding:20px; border-radius:15px; box-shadow:0 3px 15px rgba(0,0,0,0.3); text-align:center; z-index:1002; width:90%; max-width:400px; max-height:80%; overflow-y:auto; }
#totalModal h2 { font-size:20px; margin-bottom:15px; color:#8a2be2; }
#totalModal button { margin:5px; padding:8px 15px; border:none; border-radius:10px; background:#8a2be2; color:#fff; cursor:pointer; font-weight:bold; transition:0.3s; }
#totalModal button:hover { background:#6a1fbf; }

/* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³Ù„Ø© */
#cartList { text-align:right; margin-bottom:10px; }
.cart-item { display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid #ccc; padding:5px 0; }
.cart-item span { margin:0 5px; }
.cart-item button { padding:2px 8px; font-size:14px; }

#contactNumbers { margin-top:15px; display:none; }
#contactNumbers a { display:block; color:#25d366; font-weight:bold; text-decoration:none; margin:5px 0; }
#contactNumbers a:hover { text-decoration:underline; }

#toast {
    position: fixed; bottom:140px; right:20px; background:#25d366; color:#fff; padding:10px 20px; border-radius:10px;
    box-shadow:0 2px 5px rgba(0,0,0,0.3); display:none; z-index:1003;
}

@media(max-width:600px){
    .product { width:90%; max-width:90%; }
    .product img { height:180px; }
    h1 { font-size:20px; }
    .logo { font-size:18px; padding:10px; }
}
</style>
</head>
<body>

<div class="logo">ğŸŒŸ Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø£ØµÙ„ÙŠØ§Øª â€“ Ø´Ø±ÙƒÙ‡ Ø¬Ù†Ù‡ ğŸŒŸ</div>
<h1>Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h1>
<div id="products-container"></div>

<button class="support-btn" onclick="window.open('https://wa.me/201022495795','_blank')">Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ</button>
<button class="total-btn" onclick="showTotalAmountOnly()">Ø§Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙØ§ØªÙˆØ±Ø©</button>
<button class="cart-btn" onclick="showTotal()">ğŸ›’ Ø¹Ø±Ø¶ Ø§Ù„Ø³Ù„Ø©</button>

<div id="totalModal">
    <h2>Ø§Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙØ§ØªÙˆØ±Ø©: <span id="totalAmount">0</span> Ø¬Ù†ÙŠÙ‡</h2>
    <div id="cartList"></div>
    <button onclick="sendOrder()">Ø§Ø±Ø³Ø§Ù„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</button>
    <button onclick="closeTotalModal()">Ø§ØºÙ„Ø§Ù‚</button>
    <div id="contactNumbers">
        <a href="https://wa.me/201067070423" target="_blank">ğŸ“ 01067070423</a>
        <a href="https://wa.me/201022495795" target="_blank">ğŸ“ 01022495795</a>
        <a href="https://wa.me/201012253500" target="_blank">ğŸ“ 01012253500</a>
    </div>
</div>

<div id="toast">ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©</div>

<script>
const SCRIPT_PRODUCTS_URL = "https://script.google.com/macros/s/AKfycbxW3_pcjSfffMTLZefZpzFIrbhijiaWY_u_4ZAmXEV2O04SMN5zplucKnAugWWbP8zzmA/exec";
const container = document.getElementById("products-container");
let productsData = [];
let cart = [];

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
fetch(SCRIPT_PRODUCTS_URL)
.then(res => res.json())
.then(data => {
    productsData = data;
    container.innerHTML = "";
    for(let i=0;i<productsData.length;i++){
        const item = productsData[i];
        const div = document.createElement("div");
        div.className = "product";
        div.innerHTML = `
            <img src="${item.image}" alt="${item.name}" loading="lazy">
            <div class="name">${item.name}</div>
            <div class="price">Ø§Ù„Ø³Ø¹Ø±: ${item.price} Ø¬Ù†ÙŠÙ‡</div>
            <input type="number" min="1" value="1" data-index="${i}">
            <button onclick="addToCart(${i})">Ø£Ø¶Ù Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©</button>
        `;
        container.appendChild(div);
    }
})
.catch(err=>console.log("âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:",err));

function showToast(msg){
    const toast = document.getElementById("toast");
    toast.innerText = msg;
    toast.style.display = "block";
    setTimeout(()=>toast.style.display="none",1500);
}

// Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©
function addToCart(index){
    const input = container.querySelector(`input[data-index='${index}']`);
    const quantity = parseInt(input.value);
    if(quantity <=0) return;
    cart[index] = quantity;
    showToast(`${productsData[index].name} ØªÙ… Ø¥Ø¶Ø§ÙØªÙ‡/ØªØ­Ø¯ÙŠØ«Ù‡ ÙÙŠ Ø§Ù„Ø³Ù„Ø©`);
}

// Ø¹Ø±Ø¶ Ø§Ù„Ø³Ù„Ø© Ù…Ø¹ ØªÙØ§ØµÙŠÙ„ ØªØ¹Ø¯ÙŠÙ„ ÙˆØ­Ø°Ù
function showTotal(){
    let total = 0;
    const cartList = document.getElementById("cartList");
    cartList.innerHTML = "";
    cart.forEach((qty, idx)=>{
        if(qty){
            total += qty*productsData[idx].price;
            const itemDiv = document.createElement("div");
            itemDiv.className = "cart-item";
            itemDiv.innerHTML = `
                <span>${productsData[idx].name}</span>
                <span>Ø§Ù„Ø³Ø¹Ø±: ${productsData[idx].price} Ã— 
                <input type="number" min="1" value="${qty}" style="width:40px;" onchange="updateQty(${idx},this.value)"> = <strong>${productsData[idx].price*qty}</strong> Ø¬Ù†ÙŠÙ‡</span>
                <button onclick="removeItem(${idx})">Ø­Ø°Ù</button>
            `;
            cartList.appendChild(itemDiv);
        }
    });
    document.getElementById("totalAmount").innerText = total;
    document.getElementById("totalModal").style.display = "block";
    document.getElementById("contactNumbers").style.display = 'none';
}

// Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ ÙÙ‚Ø· Ø¨Ø¯ÙˆÙ† ØªÙØ§ØµÙŠÙ„
function showTotalAmountOnly(){
    let total = 0;
    cart.forEach((qty, idx)=>{ if(qty) total += qty*productsData[idx].price; });
    document.getElementById("cartList").innerHTML = "";
    document.getElementById("totalAmount").innerText = total;
    document.getElementById("totalModal").style.display = "block";
    document.getElementById("contactNumbers").style.display = 'none';
}

// ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙƒÙ…ÙŠØ© ÙÙŠ Ø§Ù„Ø³Ù„Ø©
function updateQty(idx, value){
    value = parseInt(value);
    if(value<=0) { delete cart[idx]; } else { cart[idx]=value; }
    showTotal();
}

// Ø­Ø°Ù Ù…Ù†ØªØ¬ Ù…Ù† Ø§Ù„Ø³Ù„Ø©
function removeItem(idx){
    delete cart[idx];
    showTotal();
}

// Ø§ØºÙ„Ø§Ù‚ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„
function closeTotalModal(){ document.getElementById("totalModal").style.display = 'none'; }

// Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨ (ÙŠÙØªØ­ Ù†Ø§ÙØ°Ø© Ø¬Ø¯ÙŠØ¯Ø©)
function sendOrder(){
    let orderText = "Ø·Ù„Ø¨ÙŠØ©:%0A";
    cart.forEach((qty, idx)=>{
        if(qty){
            orderText += `${productsData[idx].name} Ã— ${qty} = ${productsData[idx].price*qty} Ø¬Ù†ÙŠÙ‡%0A`;
        }
    });
    const total = cart.reduce((sum, qty, idx) => qty ? sum + qty*productsData[idx].price : sum, 0);
    orderText += `Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ: ${total} Ø¬Ù†ÙŠÙ‡`;
    window.open(`https://wa.me/201022495795?text=${orderText}`,'_blank');
}
</script>
</body>
</html>
