<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>جميع منتجات جنة</title>
<style>
/* CSS الحالي يبقى كما هو مع إضافة التالي */

/* تحسين شعار "جديد" */
.new-product-badge {
  position: absolute;
  top: 5px;
  left: 5px;
  background: linear-gradient(135deg, #ff4444, #cc0000);
  color: white;
  padding: 4px 8px;
  border-radius: 15px;
  font-size: 11px;
  font-weight: bold;
  z-index: 1;
  box-shadow: 0 2px 5px rgba(0,0,0,0.3);
  animation: pulse-badge 2s infinite;
  display: flex;
  align-items: center;
  gap: 3px;
}

@keyframes pulse-badge {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}

/* تحسينات إضافية للمنتجات الجديدة */
.product.new-product {
  border: 2px solid #ff4444;
  box-shadow: 0 4px 12px rgba(255, 68, 68, 0.2);
}

.product.new-product:hover {
  box-shadow: 0 6px 15px rgba(255, 68, 68, 0.3);
  transform: translateY(-3px);
}

/* باقي CSS يبقى كما هو */
:root {
  --primary-color: #8a2be2;
  --secondary-color: #ffd814;
  --accent-color: #ff4444;
  --text-color: #333;
  --light-bg: #f9f9f9;
  --card-bg: #fff;
}

body { 
  font-family: Tahoma, sans-serif; 
  margin: 0; 
  background: var(--light-bg);
  font-size: 14px;
  padding-bottom: 60px;
}

/* ... باقي CSS الحالي ... */
</style>
</head>
<body class="hide-price">

<!-- باقي HTML يبقى كما هو -->

<script>
// دالة renderProducts المعدلة
function renderProducts(data, containerElement){
  let html = "";
  
  if (data.length === 0) {
    html = `<div style="text-align: center; padding: 20px; color: #666;">لا توجد منتجات لعرضها</div>`;
  } else {
    data.forEach((item, index) => {
      const formattedPrice = formatPrice(item.price);
      
      // الكشف عن المنتجات الجديدة بناءً على وجود ".." في الاسم
      const isNewProduct = item.name && item.name.includes("..");
      
      // إزالة ".." من الاسم للعرض
      const displayName = item.name ? item.name.replace(/\.\./g, "") : item.name;
      
      html += `<div class="product ${isNewProduct ? 'new-product' : ''}">
                  ${isNewProduct ? '<span class="new-product-badge">🆕 جديد</span>' : ''}
                  <img src="${item.image || 'https://via.placeholder.com/150'}" 
                       onerror="handleImageError(this)" 
                       alt="${displayName}" 
                       loading="lazy"
                       onload="this.style.display='block'; const placeholder=this.parentNode.querySelector('.image-placeholder'); if(placeholder) placeholder.remove();">
                  <div class="product-info">
                    <div class="name">${displayName}</div>
                    <div class="price">${formattedPrice} جنيه</div>
                    <input type="number" min="1" value="${cart[index] || 1}" data-index="${index}">
                    <button onclick="addToCart(${index})">أضف إلى السلة</button>
                  </div>
               </div>`;
    });
  }
  
  containerElement.innerHTML = html;
  
  // إضافة مستمعي الأحداث لحقول الكمية
  containerElement.querySelectorAll('input[type="number"]').forEach(input => {
    input.addEventListener('change', function() {
      const index = parseInt(this.getAttribute('data-index'));
      const value = parseInt(this.value);
      updateQty(index, value);
    });
  });
  
  togglePricesVisibility();
}

// باقي JavaScript يبقى كما هو
</script>
</body>
</html>
